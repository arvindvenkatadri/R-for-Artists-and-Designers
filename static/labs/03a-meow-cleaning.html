---
title: "Lab 03a: Animal Word Cleaning"
subtitle: "CS631"
author: "Alison Hill"
output:
  html_document:
    theme: flatly
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="data" class="section level1">
<h1>Data</h1>
<p><a href="http://langcog.github.io/wordbankr/" class="uri">http://langcog.github.io/wordbankr/</a></p>
</div>
<div id="packages" class="section level1">
<h1>Packages</h1>
<pre class="r"><code>library(tidyverse)
library(wordbankr)
library(here)</code></pre>
<pre class="r"><code>my_sounds &lt;- c(&quot;meow&quot;, &quot;woof woof&quot;, &quot;cockadoodledoo&quot;)

# first get the items in the animal category
sounds &lt;- get_item_data(language = &quot;English (American)&quot;, 
                         form = &quot;WG&quot;) %&gt;%
  filter(definition %in% my_sounds) 

# then get instrument data for those items
sounds_data &lt;- get_instrument_data(
  language = &quot;English (American)&quot;,
  form = &quot;WG&quot;,
  items = sounds$item_id,
  administrations = TRUE,
  iteminfo = TRUE
  ) %&gt;% 
  mutate(produces = value == &quot;produces&quot;,
         understands = case_when(
           produces == TRUE | value == &quot;understands&quot; ~ TRUE,
           TRUE ~ FALSE
         )) %&gt;% 
  drop_na(produces) %&gt;% 
  rename(sound = uni_lemma)

# what proportion of kids at each age understand/produce each word?
sounds_summary &lt;- sounds_data %&gt;% 
  group_by(age, sound) %&gt;%
  summarise(kids_produce = sum(produces, na.rm = TRUE),
            kids_understand = sum(understands, na.rm = TRUE),
            kids_respond = n_distinct(data_id),
            prop_produce = kids_produce / kids_respond,
            prop_understand = kids_understand / kids_respond)</code></pre>
<p>Now letâ€™s export both data frames for the lab.</p>
<pre class="r"><code>write_csv(sounds_data, here::here(&quot;static/labs/data&quot;,
                                       &quot;animal_sounds_data.csv&quot;))</code></pre>
<pre><code>Error in open.connection(file, &quot;wb&quot;): cannot open the connection</code></pre>
<pre class="r"><code>write_csv(sounds_summary, here::here(&quot;static/labs/data&quot;,
                                        &quot;animal_sounds_summary.csv&quot;))</code></pre>
<pre><code>Error in open.connection(file, &quot;wb&quot;): cannot open the connection</code></pre>
</div>
